<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCOLE Missing and Exploited Persons Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .quiz-container {
            max-width: 800px;
            margin: 2rem auto;
        }
        .answer-option {
            transition: all 0.2s ease-in-out;
        }
        .answer-option:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #D1FAE5 !important;
            border-color: #10B981 !important;
            color: #065F46 !important;
        }
        .incorrect {
            background-color: #FEE2E2 !important;
            border-color: #EF4444 !important;
            color: #991B1B !important;
        }
        .progress-bar-fill {
            transition: width 0.3s ease-in-out;
        }
        .review-correct {
            color: #059669;
        }
        .review-incorrect {
            color: #e11d48;
            text-decoration: line-through;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="quiz-app" class="quiz-container p-4 sm:p-8">
        
        <!-- Quiz Start Screen -->
        <div id="start-screen" class="text-center bg-white p-8 rounded-2xl shadow-lg">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">Missing and Exploited Persons</h1>
            <p class="text-lg text-gray-600 mb-8">An exhaustive quiz based on the "Basic Peace Officer Course | Chapter 18" handout to test your knowledge on Missing and Exploited Persons.</p>
            <button id="start-btn" class="w-full sm:w-auto bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-blue-700 transition-colors shadow-md">Start Quiz</button>
        </div>

        <!-- Quiz Interface -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-semibold">Question <span id="question-number"></span> of <span id="total-questions"></span></h2>
                <div id="timer" class="text-lg font-mono bg-gray-200 px-3 py-1 rounded-md">00:00</div>
            </div>
            
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
            </div>

            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
                <p id="question-text" class="text-xl font-medium mb-8 min-h-[6rem]"></p>
                <div id="answer-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Answer options will be injected here by JS -->
                </div>
            </div>
             <div id="rationale-box" class="hidden mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <h3 class="font-bold text-blue-800">Rationale:</h3>
                <p id="rationale-text" class="text-blue-700"></p>
                <p class="text-sm text-blue-600 mt-2">Source: <span id="rationale-source"></span></p>
            </div>
            <button id="next-btn" class="hidden w-full bg-blue-600 text-white font-bold py-3 px-8 rounded-lg mt-8 hover:bg-blue-700 transition-colors shadow-md">Next Question</button>
        </div>

        <!-- Quiz Results Screen -->
        <div id="results-screen" class="hidden text-center bg-white p-8 rounded-2xl shadow-lg">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Quiz Complete!</h1>
            <p class="text-lg text-gray-600 mb-6">Here's how you did:</p>
            <div class="flex flex-col sm:flex-row justify-around items-center my-8 gap-8 sm:gap-0">
                <div>
                    <p id="score-percentage" class="text-5xl font-bold text-green-600">0%</p>
                    <p class="text-gray-500">Score</p>
                </div>
                 <div>
                    <p class="text-5xl font-bold text-blue-600"><span id="correct-answers">0</span>/<span id="total-answered">0</span></p>
                    <p class="text-gray-500">Correct Answers</p>
                </div>
                 <div>
                    <p id="final-time" class="text-5xl font-bold text-gray-700">00:00</p>
                    <p class="text-gray-500">Time Taken</p>
                </div>
            </div>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button id="restart-btn" class="w-full sm:w-auto bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-blue-700 transition-colors shadow-md">Try Again</button>
                <button id="review-btn" class="w-full sm:w-auto bg-gray-700 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-gray-800 transition-colors shadow-md">Review Answers</button>
            </div>
        </div>
        
        <!-- Review Screen -->
        <div id="review-screen" class="hidden bg-white p-8 rounded-2xl shadow-lg">
            <h1 class="text-3xl font-bold text-gray-900 mb-6">Answer Review</h1>
            <div id="review-container" class="space-y-6">
                <!-- Review content will be injected here -->
            </div>
            <button id="back-to-results-btn" class="w-full sm:w-auto bg-gray-700 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-gray-800 transition-colors shadow-md mt-8">Back to Results</button>
        </div>
    </div>

    <script>
        const quizData = [
            // Unit 1: Types of Missing Persons
            { question: "Which category describes a person with a mental or physical impairment that puts them at risk of immediate harm?", options: ["Endangered", "Involuntary", "Disability", "Juvenile"], answer: "Disability", rationale: "A person with a 'Disability' is defined as someone with a mental, physical, intellectual, and/or developmental impairment which increases the possibility of putting themselves at risk of immediate harm.", page: "Page 1" },
            { question: "A person of any age who is missing and in the company of another under circumstances that place them in danger is classified as:", options: ["Involuntary", "Disability", "Endangered", "Juvenile"], answer: "Endangered", rationale: "The 'Endangered' category applies to a person of any age who is missing and is with another person under circumstances that create a dangerous situation.", page: "Page 1" },
            { question: "An adult who is reported missing but has left of their own free will is categorized as a:", options: ["Disaster victim", "Involuntary", "Voluntary missing adult", "Endangered person"], answer: "Voluntary missing adult", rationale: "A 'Voluntary missing adult' is an adult who is reported missing but has chosen to leave on their own.", page: "Page 1" },
            { question: "What does the 'Missing from care' category refer to for a child?", options: ["A child who ran away from their biological parents' home.", "A child not in the physical custody of the agency or institution they were placed with.", "A child who is voluntarily on a trip without their caregiver.", "Any child missing from a hospital."], answer: "A child not in the physical custody of the agency or institution they were placed with.", rationale: "For children, 'Missing from care' means the child is not in the physical custody of the agency, individual, or institution responsible for them, such as a foster care placement.", page: "Page 2" },
            { question: "A person of any age who is missing under circumstances indicating the disappearance was not voluntary falls into which category?", options: ["Endangered", "Involuntary", "Disability", "Voluntary missing adult"], answer: "Involuntary", rationale: "An 'Involuntary' missing person is of any age and is missing under circumstances that suggest the disappearance was not by their own choice.", page: "Page 1" },
            { question: "A child taken or concealed by a parent, depriving another parent of their custody rights, is an example of what?", options: ["Non-family abduction", "Attempted abduction", "A runaway situation", "Family abduction"], answer: "Family abduction", rationale: "'Family abduction' occurs when a child is taken, wrongfully retained, or concealed by a parent or other family member, depriving another individual of their custody or visitation rights.", page: "Page 2" },
            { question: "According to the PDF, which type of abduction are children much more likely to be victims of?", options: ["Abduction by a complete stranger.", "Abduction by someone they know.", "Non-family abduction by an online acquaintance.", "Attempted abductions."], answer: "Abduction by someone they know.", rationale: "The material states that children are much more likely to be abducted by someone they know, rather than a stranger. This includes family and non-family acquaintances.", page: "Page 2-3" },
            { question: "What is the legal definition of a 'Runaway'?", options: ["An individual under 18 who leaves home without permission.", "Any adult who leaves their residence voluntarily.", "A child escaping from a negative living environment.", "A youth who has been forced to leave home."], answer: "An individual under 18 who leaves home without permission.", rationale: "A 'Runaway' is defined as an individual less than 18 years of age who voluntarily leaves from home or a place of legal residence without parental or legal guardian permission.", page: "Page 3" },
            { question: "Which of these is a common reason for a child in the child welfare system to run away?", options: ["They are seeking adventure.", "They are trying to avoid foster care or escape a specific placement.", "Their friends encourage them to do it.", "They are trying to get more attention from caseworkers."], answer: "They are trying to avoid foster care or escape a specific placement.", rationale: "Children in the child welfare system are prone to running away to avoid foster care, escape a particular placement, or due to placement instability.", page: "Page 3" },
            { question: "What is the term for youth who have been asked or forced to leave their homes by parents or caregivers?", options: ["Runaway youth", "Throwaway/giveaway youth", "Displaced youth", "Wandering youth"], answer: "Throwaway/giveaway youth", rationale: "'Throwaway/giveaway youth' are those who have been asked to leave, forced to leave, or given away by parents or caregivers with no alternate care arranged, which heightens their risk of exploitation.", page: "Page 4" },
            { question: "Wandering with the purpose of getting to something of interest, like water or train tracks, is known as what?", options: ["Bolting/fleeing", "Goal-directed wandering", "Nighttime wandering", "Disoriented wandering"], answer: "Goal-directed wandering", rationale: "'Goal-directed wandering' is a type of wandering with the purpose of getting to something of interest, such as water, train tracks, or a park.", page: "Page 4" },
            { question: "A sudden act of running to escape from a stressful situation or out of excitement is called what?", options: ["Goal-directed wandering", "Bolting/fleeing", "Sensory seeking", "Throwaway behavior"], answer: "Bolting/fleeing", rationale: "'Bolting/fleeing' is the sudden act of running, usually motivated by a desire to quickly escape from a stressful situation or out of excitement.", page: "Page 4" },
            { question: "Which of the following is an effect of a disaster that can complicate finding a missing person?", options: ["Increased police presence in the area.", "Communication system failures, like disrupted phone networks.", "Availability of emergency shelters.", "More media coverage of the area."], answer: "Communication system failures, like disrupted phone networks.", rationale: "Effects of a disaster include infrastructural problems and communication system failures, which severely complicate efforts to locate and reunify people.", page: "Page 5" },
            
            // Unit 2: Proper Handling of a Missing Person Case
            { question: "What is the function of the Missing Persons Clearinghouse (MPCH) under CCP Sec. 63.003?", options: ["To issue AMBER alerts exclusively.", "To serve as a central repository of information on missing persons in Texas.", "To investigate all missing person cases directly.", "To provide financial support to families of missing persons."], answer: "To serve as a central repository of information on missing persons in Texas.", rationale: "The MPCH's function is to be a central repository for information on missing children, missing persons, and attempted child abductions, and to communicate with the NCIC.", page: "Page 6" },
            { question: "Which national system is a centralized repository and resource center for missing, unidentified, and unclaimed person cases?", options: ["NCIC", "TCIC", "NamUs", "AMBER Alert System"], answer: "NamUs", rationale: "The National Missing and Unidentified Persons System (NamUs) is a national centralized repository that connects law enforcement with tools and resources to resolve long-term missing person cases.", page: "Page 6" },
            { question: "Which service specializes in wanderings and medical emergencies for individuals living with Alzheimer's disease or dementia?", options: ["NamUs", "TCIC", "MPCH", "Alzheimer's Association Safe Return"], answer: "Alzheimer's Association Safe Return", rationale: "The Alzheimer's Association Safe Return is a nationwide emergency response service specifically for individuals living with Alzheimer's or another dementia who wander or have medical emergencies.", page: "Page 6" },
            { question: "Can an AMBER Alert be activated locally if statewide criteria have not yet been met?", options: ["No, only statewide activation is allowed.", "Yes, if the chief law enforcement officer of the agency believes it is warranted.", "Only with permission from the governor's office.", "Only after a 24-hour waiting period."], answer: "Yes, if the chief law enforcement officer of the agency believes it is warranted.", rationale: "Local area activation of an AMBER alert is allowed under certain circumstances if statewide criteria are not yet verified, but the local chief law enforcement officer believes it's warranted.", page: "Page 7" },
            { question: "Which statewide alert is used to assist in locating a missing senior citizen or a person with Alzheimer's disease?", options: ["AMBER Alert", "CLEAR Alert", "Silver Alert", "Camo Alert"], answer: "Silver Alert", rationale: "A 'Silver Alert' is the specific statewide alert designed to help locate missing senior citizens or persons with Alzheimer's disease.", page: "Page 7" },
            { question: "An Endangered Missing Persons Alert is used to assist in locating what type of individual?", options: ["Any missing child under 13.", "Missing persons with an intellectual disability.", "Missing adults over the age of 65.", "Victims of a natural disaster."], answer: "Missing persons with an intellectual disability.", rationale: "The Endangered Missing Persons Alert is a statewide alert specifically to assist in locating missing persons who have an intellectual disability.", page: "Page 7" },
            { question: "A CLEAR Alert is used to locate and rescue which group of individuals?", options: ["Abducted children.", "Missing military members.", "Missing senior citizens.", "Missing, kidnapped, or abducted adults in immediate danger."], answer: "Missing, kidnapped, or abducted adults in immediate danger.", rationale: "A 'CLEAR Alert' is a statewide alert used to assist in locating and rescuing missing, kidnapped, or abducted adults, or adults who are in immediate danger of injury or death.", page: "Page 7" },
            { question: "A Camo Alert is designed to locate which specific group of missing persons?", options: ["Children with disabilities.", "Adults with intellectual disabilities.", "Missing current or former members of the U.S. armed forces.", "Victims of human trafficking."], answer: "Missing current or former members of the U.S. armed forces.", rationale: "A 'Camo Alert' is the statewide alert specifically designated to assist in locating missing current or former members of the United States armed forces.", page: "Page 7" },
            { question: "What is a mandatory requirement for activating any statewide alert?", options: ["The missing person must be a minor.", "There must be evidence of foul play.", "There must be sufficient information to disseminate to the public.", "The person must have been missing for at least 12 hours."], answer: "There must be sufficient information to disseminate to the public.", rationale: "A key criterion to activate any of these alerts is that there must be sufficient information about the individual, a suspect, or a vehicle to share with the public to aid in the search.", page: "Page 7" },
            { question: "According to CCP Sec. 63.009, what is the primary duty of a law enforcement agency regarding a missing person report?", options: ["Wait 24 hours before taking a report.", "Refer the reporting person to the agency with jurisdiction.", "Take the report, regardless of jurisdiction.", "Only take reports for children and endangered adults."], answer: "Take the report, regardless of jurisdiction.", rationale: "The law requires that regardless of jurisdiction, a law enforcement agency shall take a missing persons' report. A missing person is never out of law enforcement's jurisdiction.", page: "Page 8" },
            { question: "Per 42 USC 5779(a), agencies are required to enter records into the NCIC Missing Person File for missing individuals under what age?", options: ["21", "17", "18", "16"], answer: "18", rationale: "Federal law requires agencies to enter records into the NCIC Missing Person File for any missing individual under the age of 18.", page: "Page 9" },
            { question: "Under CCP 63.00905, what must law enforcement do immediately after receiving a report of a missing child?", options: ["Activate an AMBER alert.", "Notify the child's school.", "Begin an investigation into the location of the child.", "Enter the child's information into NamUs."], answer: "Begin an investigation into the location of the child.", rationale: "The law requires law enforcement to 'immediately begin an investigation into the location of the child reported missing.'", page: "Page 9" },
            { question: "Under CCP Sec. 63.020, what is the duty of a school when notified that a child is missing?", options: ["Conduct their own search of the campus.", "Contact the child's friends for information.", "Flag the missing child's records.", "Post flyers around the school."], answer: "Flag the missing child's records.", rationale: "Schools have a duty to flag the records of a missing child to alert officials if a request for those records is made, which could indicate the child's location.", page: "Page 9" },
            { question: "What offense is committed under Penal Code Sec. 37.081?", options: ["Interference with Child Custody", "False Report Regarding Missing Child or Missing Person", "Harboring a Runaway", "Failure to Report a Missing Child"], answer: "False Report Regarding Missing Child or Missing Person", rationale: "Penal Code Sec. 37.081 makes it an offense to knowingly make a false report of a missing child or person to a law enforcement agency.", page: "Page 9" },
            { question: "If a missing person report is discovered to be falsified, what must the law enforcement agency do?", options: ["Charge the reporting person with a felony.", "Clear the report entry from NCIC and TCIC.", "Keep the report active for 30 days as a precaution.", "Notify the local media of the false report."], answer: "Clear the report entry from NCIC and TCIC.", rationale: "When a report is found to be false, the agency must clear the entry from NCIC/TCIC and contact the MPCH to confirm the disposition of the case.", page: "Page 9" },

            // Unit 3: Recovery and Reunification
            { question: "When a missing child is located, what must law enforcement do according to CCP Sec. 63.00905(g)?", options: ["Take the child to the nearest police station.", "Deliver the child to a person entitled to possession.", "Interview the child about the disappearance.", "Notify the media of the recovery."], answer: "Deliver the child to a person entitled to possession.", rationale: "The statute requires an officer who locates a missing child to take possession and deliver or arrange for the delivery of the child to a person entitled to possession.", page: "Page 10" },
            { question: "Before returning a recovered child, what is a vital step for law enforcement?", options: ["Ensure the child has a recent medical check-up.", "Verify the custodial guardian(s) of the child.", "Make the child sign a statement about their disappearance.", "Take a photograph of the child for records."], answer: "Verify the custodial guardian(s) of the child.", rationale: "It is vital to verify who the legal custodial guardian is, as a parent may not always have legal custody of the child.", page: "Page 10" },
            { question: "Which of the following is a possible behavior a missing person may exhibit when encountered by law enforcement?", options: ["Calm and cooperative", "Immediately asking for help", "Combative or fleeing", "Requesting to speak to the media"], answer: "Combative or fleeing", rationale: "A recovered missing person may have an extreme reaction, including being combative, fleeing, fighting, or hiding, due to fear, confusion, or trauma.", page: "Page 10" },
            { question: "Why might a recovered person not self-identify as a victim?", options: ["They are trying to protect the officer.", "They have been groomed and voluntarily left with a perpetrator.", "They are lying to get the officer in trouble.", "They do not remember their own name."], answer: "They have been groomed and voluntarily left with a perpetrator.", rationale: "A person may have been groomed and left voluntarily, not recognizing themselves as a victim. A child may also not understand they are missing if they left with a family member.", page: "Page 10" },
            { question: "What is a key principle of a trauma-informed approach when encountering a recovered missing person?", options: ["Assume the person is lying if their story has inconsistencies.", "Understand the physical, social, psychological, and emotional impact of trauma.", "Immediately restrain the person for safety.", "Prioritize getting a confession if a crime occurred."], answer: "Understand the physical, social, psychological, and emotional impact of trauma.", rationale: "A trauma-informed approach is centered on understanding the comprehensive impact of trauma on an individual, which guides the officer's interaction to be more effective and less re-traumatizing.", page: "Page 11" },
            { question: "To increase a child victim's sense of security, what physical action can an officer take?", options: ["Stand over them to show authority.", "Speak in a loud, clear voice.", "Physically get down on their level.", "Keep a physical distance of at least 10 feet."], answer: "Physically get down on their level.", rationale: "For children, getting down on their level is a specific technique to appear less intimidating and help them feel safer and more secure.", page: "Page 11" },
            { question: "What should an officer do if a recovered missing person is nonverbal?", options: ["Assume they cannot communicate.", "Wait for a specialist to arrive.", "Offer a phone or tablet to communicate via typing.", "Only ask yes/no questions they can nod to."], answer: "Offer a phone or tablet to communicate via typing.", rationale: "A best practice for interacting with a nonverbal person is to offer alternative communication methods, such as typing on a phone or tablet.", page: "Page 11" },
            { question: "In the 'TALK' tactics for de-escalation, what does the 'L' stand for?", options: ["Listen carefully", "Look for injuries", "Limit reality checks", "Leave the person alone"], answer: "Limit reality checks", rationale: "The 'L' in the TALK de-escalation tactics stands for 'Limit reality checks,' which means avoiding correcting the person and instead redirecting as necessary.", page: "Page 12" },
            { question: "What is the definition of 'Reunification' in the context of a disaster?", options: ["The process of rebuilding damaged infrastructure.", "The process of providing financial aid to survivors.", "The process of assisting displaced survivors with reestablishing contact with family and friends.", "The process of clearing debris from the disaster area."], answer: "The process of assisting displaced survivors with reestablishing contact with family and friends.", rationale: "Reunification is the specific process of helping disaster survivors who have been separated to voluntarily reestablish contact with their family and friends.", page: "Page 12" },
            { question: "What is a significant challenge in reunification efforts after a large-scale disaster?", options: ["Lack of media interest.", "Victims not wanting to be found.", "The scale of the disaster and mass evacuation of residential areas.", "Too many volunteers trying to help."], answer: "The scale of the disaster and mass evacuation of residential areas.", rationale: "Challenges to reunification include the scale of the disaster, mass evacuations, communication failures, and limited resources, which can separate families across a wide area.", page: "Page 13" },

            // Unit 4: Types of Exploited Persons
            { question: "What is the legal definition of 'Exploitation'?", options: ["Any use of a person's resources for another's benefit.", "The illegal or improper use of a child, elderly, or disabled individual for monetary or personal gain.", "Hiring a person for a job below minimum wage.", "Convincing someone to give you money."], answer: "The illegal or improper use of a child, elderly, or disabled individual for monetary or personal gain.", rationale: "Exploitation is defined as the illegal or improper use of a child, elderly individual, or disabled individual, or their resources, for monetary or personal benefit, profit, or gain.", page: "Page 14" },
            { question: "The actual or attempted abuse of a position of vulnerability for sexual purposes is known as:", options: ["Labor exploitation", "Sexual exploitation", "Financial exploitation", "Online exploitation"], answer: "Sexual exploitation", rationale: "'Sexual exploitation' is the actual or attempted abuse of a position of vulnerability, power, or trust, for sexual purposes.", page: "Page 14" },
            { question: "What does financial exploitation most often involve?", options: ["Identity theft for credit card fraud.", "Wrongful or unauthorized taking of money or assets from elderly adults or adults with disabilities.", "Online phishing scams targeting the general public.", "Forcing someone to work to pay off a debt."], answer: "Wrongful or unauthorized taking of money or assets from elderly adults or adults with disabilities.", rationale: "Financial exploitation is most often found in cases involving the wrongful taking of money, assets, or property from elderly adults or adults with disabilities.", page: "Page 14" },
            { question: "What does the term 'traffic' mean in the context of human trafficking?", options: ["Only to transport a person across borders.", "To transport, entice, recruit, harbor, provide, or otherwise obtain another person by any means.", "To sell illegal goods to another person.", "To operate a vehicle in a prohibited area."], answer: "To transport, entice, recruit, harbor, provide, or otherwise obtain another person by any means.", rationale: "The definition of 'traffic' is broad and includes various actions like transporting, enticing, recruiting, harboring, or providing a person for the purpose of exploitation.", page: "Page 15" },
            { question: "What is the definition of 'Labor trafficking'?", options: ["Paying an employee less than minimum wage.", "Recruiting or obtaining a person for labor through force, fraud, or coercion.", "Hiring an undocumented worker.", "Forcing an employee to work overtime."], answer: "Recruiting or obtaining a person for labor through force, fraud, or coercion.", rationale: "Labor trafficking involves the recruitment, harboring, transportation, provision, or obtaining of a person for labor or services, using force, fraud, or coercion for the purpose of subjection to involuntary servitude, peonage, debt bondage, or slavery.", page: "Page 15" },
            { question: "When a victim's labor is used as a means of repayment for a debt owed, this is known as:", options: ["Forced labor", "Domestic servitude", "Bonded/debt labor", "Involuntary servitude"], answer: "Bonded/debt labor", rationale: "'Bonded/debt labor' is a specific form of labor trafficking where the victim's labor is demanded as a means of repaying a loan or debt.", page: "Page 16" },
            { question: "According to Penal Code Sec. 20A.02, 'Trafficking of Persons' involves...", options: ["Only transporting a person across state lines.", "Forcing a person into labor or services to receive a benefit.", "Knowingly harboring a runaway child.", "Assisting someone in illegally entering the country."], answer: "Forcing a person into labor or services to receive a benefit.", rationale: "The offense of Trafficking of Persons involves trafficking a person with the intent that the trafficked person be forced into labor or services, from which the offender receives a benefit.", page: "Page 15" },
            { question: "Which group is considered at high risk for exploitation?", options: ["College students", "Foster children and runaways", "Middle-class adults", "Retired professionals"], answer: "Foster children and runaways", rationale: "High-risk populations for exploitation and trafficking include vulnerable groups such as foster children, runaways, and children in the juvenile justice system.", page: "Page 16" },

            // Unit 5: Interdiction and Reporting
            { question: "What is the definition of 'Interdiction' in the context of human exploitation?", options: ["The act of prosecuting a trafficker.", "The action of intercepting and preventing the movement of a prohibited commodity or person.", "Providing services to a victim of trafficking.", "Conducting an undercover operation."], answer: "The action of intercepting and preventing the movement of a prohibited commodity or person.", rationale: "Interdiction is defined as the action of intercepting and preventing the movement of a prohibited commodity or person, which applies to human trafficking.", page: "Page 16" },
            { question: "Which of the following is a potential sign of human trafficking?", options: ["A person who is traveling with their own passport and ID.", "A person who answers questions confidently and makes eye contact.", "A person who appears to be monitored by another when talking and whose answers seem scripted.", "A person who is well-dressed and carrying expensive luggage."], answer: "A person who appears to be monitored by another when talking and whose answers seem scripted.", rationale: "Signs of trafficking include restricted communication, where a person appears to be monitored, gives scripted answers, or has a third party translate for them.", page: "Page 16-17" },
            { question: "What is a potential indicator of labor trafficking during a stop?", options: ["All individuals have their own identification.", "A 'manager' refuses to allow individuals to speak separately.", "All parties are dressed appropriately and have similar amounts of luggage.", "The individuals speak English fluently."], answer: "A 'manager' refuses to allow individuals to speak separately.", rationale: "A sign of labor trafficking is when a 'manager' or single party insists on speaking for everyone and refuses to let the other individuals speak separately or in private.", page: "Page 18" },
            { question: "Tattoos or branding on a person can be a physical indicator of what?", options: ["Gang affiliation", "Religious beliefs", "Human trafficking", "A personal hobby"], answer: "Human trafficking", rationale: "Tattoos or branding are listed as a potential sign of human trafficking, as traffickers may use them to mark their 'property.'", page: "Page 17" },
            { question: "When is interdiction required for a child?", options: ["Only when there is clear evidence of physical abuse.", "For any child involved in any runaway or prostitution scenario.", "Only if the child asks for help.", "If the child is more than 100 miles from home."], answer: "For any child involved in any runaway or prostitution scenario.", rationale: "The training material states that interdiction is required for any child involved in any runaway or prostitution scenario.", page: "Page 18" },
            { question: "If an officer has reason to believe a child is subject to abuse or neglect, who must they notify?", options: ["The child's school", "The local news media", "The Department of Family and Protective Services (DFPS)", "The Federal Bureau of Investigation (FBI)"], answer: "The Department of Family and Protective Services (DFPS)", rationale: "In situations involving a child under 18, a peace officer shall notify DFPS if they have reason to believe the child is subject to abuse or neglect.", page: "Page 18" },
            { question: "What is a crucial element of documentation in a trafficking case?", options: ["The officer's personal opinion of the suspect.", "A detailed description of the weather.", "Articulating all observations, statements, and circumstances in the report.", "Getting a written confession from the victim."], answer: "Articulating all observations, statements, and circumstances in the report.", rationale: "Documentation is crucial. The officer must articulate all observations, statements, timelines, and conditions to build a strong case and ensure the perpetrator is held accountable.", page: "Page 18-19" },
            { question: "What is TxSARNet?", options: ["A support network for trafficking victims.", "A training program for law enforcement on interdiction.", "A statewide suspicious activity reporting network for terrorism or crime-related activity.", "A database of convicted human traffickers."], answer: "A statewide suspicious activity reporting network for terrorism or crime-related activity.", rationale: "The Texas Suspicious Activity Reporting Network (TxSARNet) is a statewide network created to build a holistic view of terrorism or crime-related suspicious activity in Texas, which can include signs of trafficking.", page: "Page 19" },
            { question: "Why might a trafficking victim appear combative or not want help from law enforcement?", options: ["They are involved in criminal activity themselves.", "It could be a trauma response or fear of threats made by their abuser.", "They do not understand English.", "They prefer their current situation."], answer: "It could be a trauma response or fear of threats made by their abuser.", rationale: "Victims may appear combative as a trauma response, because they don't trust law enforcement, or because their abuser has threatened them or their family if they cooperate.", page: "Page 20" },
            { question: "What is a key principle of providing a trauma-informed response to a trafficking victim?", options: ["Withholding food and water until they cooperate.", "Ensuring the safety of the victim, including providing necessities like food and blankets.", "Conducting the interview in a busy, public place.", "Using rapid-fire questioning to get information quickly."], answer: "Ensuring the safety of the victim, including providing necessities like food and blankets.", rationale: "Ensuring the victim's physical and psychological safety is paramount. Providing necessities like food, beverages, or blankets can alleviate stress and build trust.", page: "Page 20" },
            { question: "When interacting with a trafficking victim, what should an officer do regarding language?", options: ["Use street slang to build rapport.", "Avoid using stigmatizing or judgmental language.", "Refer to the person as a 'prostitute' if sex was exchanged for money.", "Use complex legal terms to show expertise."], answer: "Avoid using stigmatizing or judgmental language.", rationale: "A trauma-informed approach requires avoiding judgmental language. Officers should use phrases like 'victim of trafficking/exploitation' to create a supportive environment.", page: "Page 21" },
            { question: "If a trafficking victim has an outstanding warrant, what is a recommended best practice?", options: ["Arrest them immediately to clear the warrant.", "Ignore the warrant completely.", "Check agency protocols to see if postponing the warrant's execution is possible.", "Use the warrant as leverage to gain cooperation."], answer: "Check agency protocols to see if postponing the warrant's execution is possible.", rationale: "Arresting victims exacerbates their mistrust. The best practice is to check agency protocols about possibly postponing the warrant's execution to prioritize their needs as a victim.", page: "Page 22" }
        ];

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const reviewScreen = document.getElementById('review-screen');

        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const reviewBtn = document.getElementById('review-btn');
        const backToResultsBtn = document.getElementById('back-to-results-btn');
        
        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const progressBar = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const answerOptionsEl = document.getElementById('answer-options');
        const rationaleBox = document.getElementById('rationale-box');
        const rationaleText = document.getElementById('rationale-text');
        const rationaleSource = document.getElementById('rationale-source');
        
        const scorePercentageEl = document.getElementById('score-percentage');
        const correctAnswersEl = document.getElementById('correct-answers');
        const totalAnsweredEl = document.getElementById('total-answered');
        const finalTimeEl = document.getElementById('final-time');
        const timerEl = document.getElementById('timer');
        const reviewContainer = document.getElementById('review-container');

        let currentQuestionIndex = 0;
        let score = 0;
        let timerInterval;
        let secondsElapsed = 0;
        let userAnswers = [];
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', startQuiz);
        reviewBtn.addEventListener('click', showReview);
        backToResultsBtn.addEventListener('click', () => {
            reviewScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
        });

        function startTimer() {
            secondsElapsed = 0;
            timerEl.textContent = '00:00';
            timerInterval = setInterval(() => {
                secondsElapsed++;
                const minutes = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
                const seconds = (secondsElapsed % 60).toString().padStart(2, '0');
                timerEl.textContent = `${minutes}:${seconds}`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function startQuiz() {
            shuffleArray(quizData);
            quizData.forEach(q => shuffleArray(q.options));

            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            startScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            reviewScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            startTimer();
            displayQuestion();
        }

        function displayQuestion() {
            rationaleBox.classList.add('hidden');
            answerOptionsEl.innerHTML = '';
            const currentQuestion = quizData[currentQuestionIndex];
            
            questionNumberEl.textContent = currentQuestionIndex + 1;
            totalQuestionsEl.textContent = quizData.length;
            questionTextEl.textContent = currentQuestion.question;

            const progress = ((currentQuestionIndex) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('answer-option', 'w-full', 'p-4', 'text-left', 'bg-white', 'border-2', 'border-gray-300', 'rounded-lg', 'hover:bg-gray-50', 'hover:border-blue-500');
                button.addEventListener('click', () => selectAnswer(button, option, currentQuestion));
                answerOptionsEl.appendChild(button);
            });
        }

        function selectAnswer(button, selectedOption, currentQuestion) {
            const { answer, rationale, page } = currentQuestion;
            userAnswers[currentQuestionIndex] = selectedOption;

            const buttons = answerOptionsEl.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === answer) {
                    btn.classList.add('correct');
                }
            });

            if (selectedOption === answer) {
                score++;
                button.classList.add('correct');
            } else {
                button.classList.add('incorrect');
            }

            rationaleText.textContent = rationale;
            rationaleSource.textContent = page;
            rationaleBox.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                nextBtn.classList.add('hidden');
                displayQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            stopTimer();
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');

            const percentage = Math.round((score / quizData.length) * 100);
            scorePercentageEl.textContent = `${percentage}%`;
            correctAnswersEl.textContent = score;
            totalAnsweredEl.textContent = quizData.length;
            finalTimeEl.textContent = timerEl.textContent;
            
            // Ensure progress bar is full at the end
            progressBar.style.width = `100%`;
        }

        function showReview() {
            resultsScreen.classList.add('hidden');
            reviewScreen.classList.remove('hidden');
            reviewContainer.innerHTML = '';

            quizData.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.answer;

                const reviewItem = document.createElement('div');
                reviewItem.classList.add('border', 'p-4', 'rounded-lg');
                reviewItem.classList.add(isCorrect ? 'bg-green-50/50 border-green-200' : 'bg-red-50/50 border-red-200');

                let userAnswerHTML = '';
                if (isCorrect) {
                    userAnswerHTML = `<p>Your answer: <span class="font-semibold review-correct">${userAnswer} (Correct)</span></p>`;
                } else {
                    userAnswerHTML = `
                        <p>Your answer: <span class="font-semibold review-incorrect">${userAnswer ? userAnswer : 'Not answered'} (Incorrect)</span></p>
                        <p>Correct answer: <span class="font-semibold review-correct">${question.answer}</span></p>
                    `;
                }

                reviewItem.innerHTML = `
                    <p class="font-bold mb-2">${index + 1}. ${question.question}</p>
                    ${userAnswerHTML}
                    <p class="text-sm text-gray-600 mt-2"><em><strong>Rationale:</strong> ${question.rationale} (Source: ${question.page})</em></p>
                `;
                reviewContainer.appendChild(reviewItem);
            });
        }

    </script>
</body>
</html>

